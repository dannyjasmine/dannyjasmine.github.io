
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>生日Party</title>
    <!-- <link rel="stylesheet" href="birthday.css"> -->

  </head>
  <body>
    <!-- <img id="background1" src="images/Birthday1.jpg" alt="1st background image">
    <header>
    <h1>
        <em>老爷子</em> 的生日Party
    </h1>
    <nav id="nav">
      <ul>
        <li><a href="intro.html">介绍</a></li>
        <li><a href="photos.html">照片</a></li>
        <li><a href="videos.html">视频</a></li>
        <li><a href="wishes.html">祝福</a></li>
        <li><a href="fortunes.html">红包</a></li>
      </ul>
    </nav>
    </header>

    
    <img id="background3" src="images/cake2.jpg" alt="3rd background image"> 
    <br>
    

    <div id="table">
    <div id="tr">
    <div id="t1" class="tc">
        寿 比 南 山
    </div>

    <div id="main" class="tc">
      <h2>今天， 一个重大的日子<p id="number"></p>
      </h2>
      <video id="party" src="images/birthday.mp4" controls muted width="200" height="300">
        <track kind=subtitles src=text.vtt srclang=en label="English">
      </video>
      <div id="description">
      <p>今天是农历贰零壹陆年九月贰拾日，老爷子的陆拾大寿生日。众多小家伙们聚在了一起，首席大厨周彩琴，经过一上午的精心烹煮，香飘飘的菜已经准备出锅。寿星正在停港田，准备来主持生日宴。</p>
      经典时刻<br>
      <img src="images/ba.jpg" alt="丹丹的照片">
      <img src="images/cut.jpg" alt="康康的照片">
      <img src="images/food.jpg" alt="帅豪的照片">
      <img src="images/cake4.jpg" alt="祥祥的照片">
      </div>
      <div id="request">
      送上你的祝福吧，在下面输入你的洋洋洒洒的文采之词
      </div>
    </div>

    <div id="t3" class="tc">
        福如东海
    </div>
    </div>
    </div>

    <img id="background2" src="images/Birthday2.jpg" alt="2nd background image">

    <img id="background4" src="images/Birthday4.jpg" alt="4th background image">

    <div id="wishes">
    <textarea name="wishes" rows="1" cols="36"></textarea><br>
    <input type="submit" value="送祝福"> 
    </div>
    <br>
    <footer>
      2016年10月20日，于息县一桥英伦小镇，正午12时，众子女、(外)孙儿孙女
    </footer> -->

    <canvas id="canvas" width="600" height="600" style="border: 1px solid blue;">
      Your browser does not support canvas element.
    </canvas>
    <br>
    <button id="init">Initialize</button>
    <br>
    Log: <pre id="log" style="border: 1px solid #ccc;"></pre>

    <script type="text/javascript">
      // $(function(){
      //   $("#t1").animate({left: "200px"}, 2000).animate({left: "2px"}, 2000);      
      //   $("#t3").animate({right: "200px"}, 2000).animate({right: "2px"}, 2000);
      //   $("#nav li").hover(function(){
      //     $(this).toggleClass("over");
      //   });

        // function showPosition(pos) {
        //   var latitude = pos.coords.latitude;
        //   var longitude = pos.coords.longitude;
        //   alert("我的位置：北纬 " + latitude + ", 东经 " + longitude);
        // }
        // function showError(err) {
        //   alert(err.code + ", " + err.message);
        // }
        // if(navigator.geolocation){
        //   navigator.geolocation.getCurrentPosition(showPosition, showError, {timeout: 300000});
        // }

        // var worker = new Worker('worker.js');
        // worker.onmessage = function (e) {
        //   document.getElementById('number').textContent = e.data;
        // }

        //var log = document.getElementById('log');
        var init = document.getElementById('init');
        init.onclick = function () {
          startup();
        };
        function startup() {
          var el = document.getElementsByTagName("canvas")[0];
          el.addEventListener("touchstart", handleStart, false);
          el.addEventListener("touchend", handleEnd, false);
          el.addEventListener("touchcancel", handleCancel, false);
          el.addEventListener("touchmove", handleMove, false);
          log("initialized.");
        } 
        var ongoingTouches = []; 
        function handleStart(evt) {
          evt.preventDefault();
          log("touchstart.");
          var el = document.getElementsByTagName("canvas")[0];
          var ctx = el.getContext("2d");
          var touches = evt.changedTouches;      
          for (var i = 0; i < touches.length; i++) {
            log("touchstart:" + i + "...");
            ongoingTouches.push(copyTouch(touches[i]));
            var color = colorForTouch(touches[i]);
            ctx.beginPath();
            ctx.arc(touches[i].pageX, touches[i].pageY, 4, 0, 2 * Math.PI, false);  // a circle at the start
            ctx.fillStyle = color;
            ctx.fill();
            log("touchstart:" + i + ".");
          }
        } 
        function handleMove(evt) {
          evt.preventDefault();
          var el = document.getElementsByTagName("canvas")[0];
          var ctx = el.getContext("2d");
          var touches = evt.changedTouches;
          for (var i = 0; i < touches.length; i++) {
            var color = colorForTouch(touches[i]);
            var idx = ongoingTouchIndexById(touches[i].identifier);
            if (idx >= 0) {
              log("continuing touch "+idx);
              ctx.beginPath();
              log("ctx.moveTo(" + ongoingTouches[idx].pageX + ", " + ongoingTouches[idx].pageY + ");");
              ctx.moveTo(ongoingTouches[idx].pageX, ongoingTouches[idx].pageY);
              log("ctx.lineTo(" + touches[i].pageX + ", " + touches[i].pageY + ");");
              ctx.lineTo(touches[i].pageX, touches[i].pageY);
              ctx.lineWidth = 4;
              ctx.strokeStyle = color;
              ctx.stroke();
              ongoingTouches.splice(idx, 1, copyTouch(touches[i]));  // swap in the new touch record
              log(".");
            } else {
              log("can't figure out which touch to continue");
            }
          }
        } 
        function handleEnd(evt) {
          evt.preventDefault();
          log("touchend");
          var el = document.getElementsByTagName("canvas")[0];
          var ctx = el.getContext("2d");
          var touches = evt.changedTouches;
          for (var i = 0; i < touches.length; i++) {
            var color = colorForTouch(touches[i]);
            var idx = ongoingTouchIndexById(touches[i].identifier);
            if (idx >= 0) {
              ctx.lineWidth = 4;
              ctx.fillStyle = color;
              ctx.beginPath();
              ctx.moveTo(ongoingTouches[idx].pageX, ongoingTouches[idx].pageY);
              ctx.lineTo(touches[i].pageX, touches[i].pageY);
              ctx.fillRect(touches[i].pageX - 4, touches[i].pageY - 4, 8, 8);  // and a square at the end
              ongoingTouches.splice(idx, 1);  // remove it; we're done
            } else {
              log("can't figure out which touch to end");
            }
          }
        } 
        function handleCancel(evt) {
          evt.preventDefault();
          log("touchcancel.");
          var touches = evt.changedTouches;
          for (var i = 0; i < touches.length; i++) {
            ongoingTouches.splice(i, 1);  // remove it; we're done
          }
        } 
        function colorForTouch(touch) {
          var r = touch.identifier % 16;
          var g = Math.floor(touch.identifier / 3) % 16;
          var b = Math.floor(touch.identifier / 7) % 16;
          r = r.toString(16); // make it a hex digit
          g = g.toString(16); // make it a hex digit
          b = b.toString(16); // make it a hex digit
          var color = "#" + r + g + b;
          log("color for touch with identifier " + touch.identifier + " = " + color);
          return color;
        } 
        function copyTouch(touch) {
          return { identifier: touch.identifier, pageX: touch.pageX, pageY: touch.pageY };
        } 
        function ongoingTouchIndexById(idToFind) {
          for (var i = 0; i < ongoingTouches.length; i++) {
            var id = ongoingTouches[i].identifier;
            if (id == idToFind) {
              return i;
            }
          }
          return -1;    // not found
        } 
        function log(msg) {
          var p = document.getElementById('log');
          p.innerHTML = msg + "\n" + p.innerHTML;
        }
        // var ongoingTouches = [];
        // function startup() {
        //   var elem = document.getElementsByTagName('canvas')[0];
        //   elem.addEventListener('touchstart', handleStart, false);
        //   elem.addEventListener('touchend', handleEnd, false);
        //   elem.addEventListener('touchcancel', handleCancel, false);
        //   elem.addEventListener('touchmove', handleMove, false);
        //   log('initialized');
        // }

        // function handleStart(e) {
        //   e.preventDefault();
        //   log('touchstart');
        //   var elem = document.getElementsByTagName('canvas')[0];
        //   var ctx = elem.getContext('2d');
        //   var touches = e.changedTouches;
        //   for (var i = 0; i < touches.length; i++) {
        //     log("touchstart: " + i + " ...");
        //     ongoingTouches.push(copyTouch(touches[i]));
        //     var color = colorForTouch(touches[i]);
        //     ctx.beginPath();
        //     ctx.arc(touches[i].pageX, touches[i].pageY, 4, 0, 2 * Math.PI, false);
        //     ctx.fillStyle = color;
        //     ctx.fill();
        //     log('touchstart: ' + i + '.');
        //   }
        // }

        // function handleMove(e) {
        //   e.preventDefault();
        //   var elem = document.getElementsByTagName('canvas')[0];
        //   var ctx = elem.getContext('2d');
        //   var touches = e.changedTouches;
        //   for (var i = 0; i < touches.length; i++) {
        //     var color = colorForTouch(touches[i]);
        //     var idx = ongoingTouchIndexById(touches[i].identifier);
        //     if (idx >= 0) {
        //       log('continuing touch' + idx);
        //       ctx.beginPath();
        //       log('ctx.moveTo(' + ongoingTouches[idx].pageX + ', ' + ongoingTouches[idx].pageY + ');');
        //       ctx.moveTo(ongoingTouches[idx].pageX, ongoingTouches[idx].pageY);
        //       log('ctx.lineTo(' + touches[i].pageX + ', ' + touches[i].pageY + ');');
        //       ctx.lineTo(touches[i].pageX, touches[i].pageY);
        //       ctx.lineWidth = 4;
        //       ctx.strokeStyle = color;
        //       ctx.stroke();
        //       ongoingTouches.splice(idx, 1, copyTouch(touches[i])); // swap in the new touch record
        //       log('.');
        //     } else {
        //       log('can not figure out which touch to continue');
        //     }
        //   }
        // }

        // function handleEnd(e) {
        //   e.preventDefault();
        //   log('touchend');
        //   var elem = document.getElementsByTagName('canvas')[0];
        //   var ctx = elem.getContext('2d');
        //   var touches = e.changedTouches;
        //   for (var i = 0; i < touches.length; i++) {
        //     var color = colorForTouch(touches[i]);
        //     var idx = ongoingTouchIndexById(touches[i].identifier);
        //     if (idx >= 0) {
        //       ctx.lineWidth = 4;
        //       ctx.fillStyle = color;
        //       ctx.beginPath();
        //       ctx.moveTo(ongoingTouches[idx].pageX, ongoingTouches[idx].pageY);
        //       ctx.lineTo(touches[i].pageX, touches[i].pageY);
        //       ctx.fillRect(touches[i].pageX - 4, touches[i].pageY - 4, 8, 8);
        //       ongoingTouches.splice(idx, 1); // remove it, we're done;
        //     } else {
        //       log('can not figure out which touch to end');
        //     }
        //   }
        // }

        // function handleCancel(e) {
        //   e.preventDefault();
        //   log('touchcanel');
        //   var touches = e.changedTouches;
        //   for (var i = 0; i < touches.length; i++) {
        //     ongoingTouches[i].splice(i, 1); // remove it, we're done
        //   }
        // }

        // function ongoingTouchIndexById(idToFind) {
        //   for (var i = 0; i < ongoingTouches.length; i++) {
        //     var id = ongoingTouches[i].identifier;
        //     if (id == idToFind) {
        //       return i; 
        //     }
        //   }
        //   return -1;
        // }

        // function copyTouch(touch) {
        //   return {identifier: touch.identifier, pageX: touch.pageX, pageY: touch.pageY};
        // }

        // function colorForTouch(touch) {
        //   var r = touch.identifier % 16;
        //   var g = Math.floor(touch.identifier / 3) % 16;
        //   var b = Math.floor(touch.identifier / 7) % 16;
        //   r = r.toString(16); // make it a hex digit
        //   g = g.toString(16); // make it a hex digit
        //   b = b.toString(16); // make it a hex digit
        //   var color = "#" + r + g + b;
        //   log('color for touch with identifier ' + touch.identifier + " = " + color);
        //   return color;
        // }

        // function log(msg) {
        //   var p = document.getElementById('log');
        //   p.innerHTML = msg + '\n' + p.innerHTML;
        // }
      // })        
    </script>
  </body>
</html>
